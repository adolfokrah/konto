import { getCachedGlobal } from '@/utilities/getGlobals'
import Link from 'next/link'
import React from 'react'

import type { Footer } from '@/payload-types'

import { CMSLink } from '@/components/Link'
import { Logo } from '@/components/Logo/Logo'
import Image from 'next/image'

// Social media icon components
const SocialIcon = ({ platform }: { platform: string }) => {
  const iconClass = 'w-5 h-5'

  switch (platform) {
    case 'twitter':
      return (
        <svg className={iconClass} fill="currentColor" viewBox="0 0 24 24">
          <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
        </svg>
      )
    case 'facebook':
      return (
        <svg className={iconClass} fill="currentColor" viewBox="0 0 24 24">
          <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" />
        </svg>
      )
    case 'linkedin':
      return (
        <svg className={iconClass} fill="currentColor" viewBox="0 0 24 24">
          <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
        </svg>
      )
    case 'instagram':
      return (
        <svg className={iconClass} fill="currentColor" viewBox="0 0 24 24">
          <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.618 5.367 11.987 11.988 11.987s11.987-5.369 11.987-11.987C24.014 5.367 18.635.001 12.017.001zM8.948 4.979c.129-.05.263-.072.397-.072.35 0 .695.15.925.42.23.27.35.627.35.99 0 .362-.12.718-.35.988-.23.27-.575.42-.925.42-.134 0-.268-.022-.397-.072-.5-.193-.823-.678-.823-1.236 0-.558.323-1.043.823-1.238zM8.527 8.895h3.586v11.104H8.527V8.895zm6.033 0h3.586v11.104h-3.586V8.895z" />
        </svg>
      )
    case 'github':
      return (
        <svg className={iconClass} fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
        </svg>
      )
    case 'youtube':
      return (
        <svg className={iconClass} fill="currentColor" viewBox="0 0 24 24">
          <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z" />
        </svg>
      )
    case 'tiktok':
      return (
        <svg className={iconClass} fill="currentColor" viewBox="0 0 24 24">
          <path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z" />
        </svg>
      )
    default:
      return null
  }
}

export async function Footer() {
  const footerData: Footer = await getCachedGlobal('footer', 1)()

  const navItems = footerData?.navItems || []
  const socialLinks = footerData?.socialLinks || []
  const bottomMenuItems = footerData?.bottomMenuItems || []

  return (
    <footer className="mt-auto bg-dark-background  text-white">
      <div className="container py-12 gap-8 flex flex-col md:flex-row md:justify-between">
        <Link className="flex items-center" href="/">
          <Logo />
        </Link>

        <div className="flex flex-col-reverse items-start md:flex-row gap-4 md:items-center">
          <nav className="flex flex-col md:flex-row gap-4">
            {navItems.map(({ link }, i) => {
              return <CMSLink className="text-white hover:underline" key={i} {...link} />
            })}
          </nav>
        </div>

        <div className="flex flex-col md:flex-row gap-4 md:items-center">
          {socialLinks.length > 0 && (
            <div className="flex gap-4 items-center">
              <span className="text-sm text-gray-300">Follow us:</span>
              <div className="flex gap-3">
                {socialLinks.map((social, index) => (
                  <Link
                    key={index}
                    href={social.url}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="text-gray-400 hover:text-white transition-colors duration-200"
                    aria-label={`Follow us on ${social.platform}`}
                  >
                    <SocialIcon platform={social.platform} />
                  </Link>
                ))}
              </div>
            </div>
          )}
        </div>
      </div>

      {/* Bottom section with menu and copyright */}
      <div className="container py-4 mt-7 flex flex-col md:flex-row md:justify-between md:items-center gap-4">
        {/* Bottom menu items */}
        {bottomMenuItems.length > 0 && (
          <nav className="flex flex-wrap gap-6">
            {bottomMenuItems.map(({ link }, i) => (
              <CMSLink
                key={i}
                className="text-sm text-gray-400 hover:text-white transition-colors duration-200"
                {...link}
              />
            ))}
          </nav>
        )}

        {/* Copyright */}
        <div className="text-sm text-gray-400">
          Â© {new Date().getFullYear()} hogpay inc, All rights reserved.
        </div>
      </div>

      <div className="w-full bg-secondary-surface hidden md:block relative overflow-hidden md:h-47 xl:h-90">
        <div className="container py-4 relative">
          <div className="relative top-6">
            <svg
              viewBox="0 0 484 134"
              className="w-full h-auto"
              fill="none"
              style={{
                fill: 'var(--logo-color, #1D232F)',
              }}
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="M58.9987 55.7675C59.0286 56.6037 58.5311 57.3702 57.7511 57.6897L49.9125 60.9012C49.1285 61.2224 48.2256 61.0238 47.6521 60.404L24.2789 35.1448C23.33 34.1193 23.6988 32.4706 24.9961 31.9391L54.983 19.6537C56.2849 19.1203 57.724 20.0384 57.7738 21.4343L58.9987 55.7675Z" />
              <path d="M43.0761 63.7322C43.6662 64.3303 43.8193 65.229 43.46 65.9861L39.8485 73.5947C39.4872 74.3558 38.685 74.812 37.84 74.737L3.40381 71.6785C2.00578 71.5543 1.15825 70.0894 1.75593 68.8302L15.5719 39.7231C16.1717 38.4593 17.8591 38.1768 18.8443 39.1752L43.0761 63.7322Z" />
              <path d="M36.7314 81.7221C37.5739 81.7699 38.2977 82.332 38.5465 83.1315L41.0466 91.1669C41.2967 91.9706 41.0138 92.8436 40.3383 93.3525L12.8091 114.091C11.6915 114.933 10.0698 114.416 9.65603 113.086L0.0913979 82.3464C-0.32388 81.0117 0.731279 79.676 2.13772 79.7559L36.7314 81.7221Z" />
              <path d="M91.312 98H77.68V28.592H91.312V53.36C94.864 50.768 99.568 49.136 104.752 49.136C119.248 49.136 126.832 58.352 126.832 73.328V98L113.2 97.904V74.672C113.2 67.952 109.552 62 102.64 62C95.824 62 91.312 67.376 91.312 74.864V98Z" />
              <path d="M159.793 99.248C145.201 99.248 134.065 87.92 134.065 74.096C134.065 60.368 145.297 49.04 159.793 49.04C174.481 49.04 185.617 60.464 185.617 74.096C185.617 87.92 174.385 99.248 159.793 99.248ZM159.793 86.48C166.801 86.48 171.985 80.912 171.985 74.192C171.985 67.472 166.801 61.904 159.793 61.904C152.785 61.904 147.697 67.472 147.697 74.192C147.697 80.912 152.785 86.48 159.793 86.48Z" />
              <path d="M214.94 121.136C203.804 121.136 195.26 116.24 190.94 107.408L202.268 101.264C204.38 105.392 208.316 108.656 214.748 108.656C222.812 108.656 228.284 102.992 228.284 93.68V92.816C225.692 96.08 221.084 98.576 214.364 98.576C201.02 98.576 190.364 88.208 190.364 74.096C190.364 60.368 201.5 49.136 216.092 49.136C230.972 49.136 241.916 59.792 241.916 74.096V93.296C241.916 110.192 230.396 121.136 214.94 121.136ZM215.9 85.712C222.716 85.712 228.092 80.624 228.092 73.808C228.092 66.992 222.716 62 215.9 62C209.18 62 203.804 66.992 203.804 73.808C203.804 80.624 209.18 85.712 215.9 85.712Z" />
              <path d="M272.526 99.248C258.702 99.248 249.006 87.92 249.006 74.096C249.006 60.464 260.142 49.04 274.734 49.04C289.614 49.04 300.558 59.792 300.558 74.096V98H287.598V92.432C284.238 96.656 279.054 99.248 272.526 99.248ZM274.734 86.48C281.742 86.48 286.926 80.912 286.926 74.192C286.926 67.472 281.742 61.904 274.734 61.904C267.726 61.904 262.638 67.472 262.638 74.192C262.638 80.912 267.726 86.48 274.734 86.48Z" />
              <path d="M323.681 119.888H310.049V74.096C310.049 59.792 320.993 49.136 335.777 49.136C350.465 49.136 361.505 60.464 361.505 74.096C361.505 88.976 351.329 99.344 336.545 99.344C331.745 99.344 327.233 97.616 323.681 94.928V119.888ZM335.777 86.48C342.785 86.48 347.873 80.912 347.873 74.192C347.873 67.472 342.785 62 335.777 62C328.769 62 323.681 67.472 323.681 74.192C323.681 80.912 328.769 86.48 335.777 86.48Z" />
              <path d="M389.811 99.248C375.987 99.248 366.291 87.92 366.291 74.096C366.291 60.464 377.427 49.04 392.019 49.04C406.899 49.04 417.843 59.792 417.843 74.096V98H404.883V92.432C401.523 96.656 396.339 99.248 389.811 99.248ZM392.019 86.48C399.027 86.48 404.211 80.912 404.211 74.192C404.211 67.472 399.027 61.904 392.019 61.904C385.011 61.904 379.923 67.472 379.923 74.192C379.923 80.912 385.011 86.48 392.019 86.48Z" />
              <path d="M450.278 121.232C438.95 121.232 430.694 116.432 426.374 107.6L437.606 101.456C439.718 105.584 443.942 108.752 450.086 108.752C458.246 108.752 462.95 102.8 462.95 93.968V92.624C460.358 96.464 456.134 98.576 450.278 98.576C434.822 98.576 428.102 88.688 428.102 74.576V50.48H441.542V74.096C441.542 81.008 445.286 85.712 452.006 85.712C458.15 85.712 462.758 80.624 462.758 73.808V50.48H476.582V93.776C476.582 110.384 465.926 121.232 450.278 121.232Z" />
            </svg>
          </div>
        </div>
      </div>
    </footer>
  )
}
